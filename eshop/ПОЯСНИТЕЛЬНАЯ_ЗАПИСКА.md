# ПОЯСНИТЕЛЬНАЯ ЗАПИСКА

**Тема:** Разработка веб-приложения «Интернет-магазин»

---

## СОДЕРЖАНИЕ

1. [Введение](#1-введение)
2. [Постановка задачи](#2-постановка-задачи)
3. [Обзор аналогов](#3-обзор-аналогов)
4. [Обоснование выбора технологий](#4-обоснование-выбора-технологий)
5. [Проектирование системы](#5-проектирование-системы)
6. [Реализация](#6-реализация)
7. [Руководство пользователя](#7-руководство-пользователя)
8. [Руководство программиста](#8-руководство-программиста)
9. [Заключение](#9-заключение)
10. [Список использованных источников](#10-список-использованных-источников)

---

## 1. ВВЕДЕНИЕ

### 1.1 Актуальность темы

В современном мире электронная коммерция играет ключевую роль в экономике. Рост онлайн-продаж ускорился особенно в последние годы, и создание удобных, функциональных и безопасных интернет-магазинов становится актуальной задачей для бизнеса любого масштаба.

Интернет-магазины позволяют компаниям:
- Расширить географию продаж без открытия физических точек
- Снизить операционные расходы
- Предоставить покупателям круглосуточный доступ к товарам
- Автоматизировать процессы учёта и управления заказами
- Собирать и анализировать данные о покупателях

### 1.2 Цель работы

Целью данной работы является разработка полнофункционального веб-приложения «Интернет-магазин» с использованием современного веб-фреймворка Django, обеспечивающего удобный интерфейс для покупателей и эффективные инструменты управления для администраторов.

### 1.3 Задачи работы

Для достижения поставленной цели необходимо решить следующие задачи:
1. Провести обзор существующих решений и технологий
2. Выбрать оптимальный технологический стек
3. Спроектировать архитектуру приложения и структуру базы данных
4. Реализовать модуль каталога товаров с категориями
5. Разработать систему управления корзиной покупок
6. Создать модуль оформления заказов
7. Реализовать систему авторизации и личного кабинета пользователя
8. Разработать административную панель для управления контентом
9. Обеспечить безопасность приложения
10. Подготовить документацию

---

## 2. ПОСТАНОВКА ЗАДАЧИ

### 2.1 Функциональные требования

#### 2.1.1 Для незарегистрированных пользователей:
- Просмотр каталога товаров
- Просмотр детальной информации о товарах
- Фильтрация и поиск товаров
- Добавление товаров в корзину
- Просмотр содержимого корзины
- Регистрация нового аккаунта
- Авторизация в системе

#### 2.1.2 Для зарегистрированных пользователей:
- Все функции незарегистрированных пользователей
- Оформление заказов
- Просмотр истории заказов
- Управление личным профилем
- Сохранение данных доставки

#### 2.1.3 Для администраторов:
- Управление категориями товаров
- Управление товарами (создание, редактирование, удаление)
- Загрузка изображений товаров
- Управление заказами (просмотр, изменение статусов)
- Управление пользователями
- Просмотр статистики продаж
- Экспорт/импорт данных

### 2.2 Нефункциональные требования

- **Производительность:** Время отклика сервера не более 2 секунд
- **Масштабируемость:** Возможность добавления новых категорий и товаров без ограничений
- **Безопасность:** Защита персональных данных пользователей, CSRF-защита
- **Кроссплатформенность:** Работа в современных веб-браузерах
- **Удобство использования:** Интуитивно понятный интерфейс
- **Доступность:** Поддержка русского языка

---

## 3. ОБЗОР АНАЛОГОВ

### 3.1 OpenCart

**Преимущества:**
- Бесплатный и открытый исходный код
- Большое количество расширений
- Поддержка мультивалютности

**Недостатки:**
- Требует PHP
- Сложная настройка для новичков
- Высокие требования к хостингу

### 3.2 Magento

**Преимущества:**
- Мощная система для крупных магазинов
- Гибкая настройка
- Поддержка B2B и B2C

**Недостатки:**
- Высокая стоимость лицензии
- Требует мощного сервера
- Сложность разработки и поддержки

### 3.3 WooCommerce (WordPress)

**Преимущества:**
- Простота установки и настройки
- Бесплатная базовая версия
- Большое количество плагинов

**Недостатки:**
- Зависимость от WordPress
- Ограниченная масштабируемость
- Проблемы с производительностью при большом количестве товаров

### 3.4 Django Oscar

**Преимущества:**
- Написан на Python/Django
- Модульная архитектура
- Полная кастомизация

**Недостатки:**
- Сложная документация
- Высокий порог входа
- Требует глубоких знаний Django

### 3.5 Вывод

Разработка собственного решения на базе Django позволяет создать систему, максимально адаптированную под конкретные требования, с понятным кодом и возможностью дальнейшего масштабирования. Это оптимальный выбор для учебного проекта и небольших коммерческих решений.

---

## 4. ОБОСНОВАНИЕ ВЫБОРА ТЕХНОЛОГИЙ

### 4.1 Язык программирования и фреймворк

**Django** выбран по следующим причинам:
- **Rapid Development:** Встроенная админ-панель, ORM, система аутентификации
- **Безопасность:** Встроенная защита от CSRF, XSS, SQL-инъекций
- **Масштабируемость:** Поддержка кэширования, разделения базы данных
- **Сообщество:** Большое количество пакетов и документация
- **Соответствие MVC:** Архитектура MVT (Model-View-Template)

### 4.2 База данных

**SQLite** используется для разработки:
- Не требует отдельной установки
- Идеально подходит для прототипирования
- Легкая миграция на PostgreSQL

**PostgreSQL** для продакшена:
- Мощная СУБД с открытым исходным кодом
- Поддержка сложных запросов
- Высокая производительность
- ACID-совместимость

### 4.3 Фронтенд

**Bootstrap 5** через django-crispy-forms:
- Адаптивный дизайн
- Готовые компоненты
- Поддержка темной темы
- Кроссбраузерность

### 4.4 Дополнительные библиотеки

- **Django Jazzmin:** Современная тема для админ-панели
- **Django Filter:** Фильтрация queryset
- **Django Import-Export:** Экспорт/импорт данных
- **Pillow:** Обработка изображений
- **Faker:** Генерация тестовых данных

---

## 5. ПРОЕКТИРОВАНИЕ СИСТЕМЫ

### 5.1 Архитектура приложения

Приложение построено по модульному принципу с разделением на четыре основных приложения:

```
eshop/
├── accounts/     # Модуль авторизации и пользователей
├── shop/         # Модуль каталога товаров
├── cart/         # Модуль корзины покупок
└── orders/       # Модуль заказов и платежей
```

### 5.2 Модель данных

#### accounts.User
Расширяет стандартную модель пользователя Django:
- email (уникальный, используется для авторизации)
- phone
- address
- postal_code
- city

#### shop.Category
- name
- slug (URL-идентификатор)
- description
- image

#### shop.Product
- category (ForeignKey → Category)
- name
- slug
- description
- price
- stock (количество на складе)
- available
- created
- updated

#### shop.ProductImage
- product (ForeignKey → Product)
- image
- description

#### cart.Cart
- user (ForeignKey → User, nullable)
- session_key
- created
- updated

#### cart.CartItem
- cart (ForeignKey → Cart)
- product (ForeignKey → Product)
- quantity

#### orders.Order
- user (ForeignKey → User, nullable)
- first_name
- last_name
- email
- address
- postal_code
- city
- phone
- status (pending, processing, shipped, delivered, cancelled)
- payment_method (card, cash, online)
- paid
- created
- updated

#### orders.OrderItem
- order (ForeignKey → Order)
- product (ForeignKey → Product)
- price
- quantity

#### orders.Payment
- order (OneToOne → Order)
- amount
- payment_method
- status (pending, completed, failed, refunded)
- transaction_id
- created
- updated

### 5.3 Диаграмма базы данных

```
User (1) ----< (0..*) Cart
User (1) ----< (0..*) Order
Cart (1) ----< (1..*) CartItem
CartItem (*) ---- (1) Product
Order (1) ----< (1..*) OrderItem
OrderItem (*) ---- (0..1) Product
Order (1) ----< (1) Payment
Category (1) ----< (0..*) Product
Product (1) ----< (0..*) ProductImage
```

### 5.4 API и URL-маршруты

#### accounts/
- `/accounts/register/` — регистрация
- `/accounts/login/` — вход
- `/accounts/logout/` — выход
- `/accounts/profile/` — профиль
- `/accounts/orders/` — история заказов

#### shop/
- `/` — каталог товаров
- `/category/<slug>/` — товары категории
- `/product/<id>/<slug>/` — детальная страница товара
- `/search/` — поиск товаров

#### cart/
- `/cart/` — корзина
- `/cart/add/<id>/` — добавить товар
- `/cart/remove/<id>/` — удалить товар
- `/cart/update/<id>/` — обновить количество

#### orders/
- `/orders/create/` — оформление заказа
- `/orders/<id>/` — детальная информация о заказе
- `/orders/<id>/payment/` — оплата заказа

---

## 6. РЕАЛИЗАЦИЯ

### 6.1 Модуль авторизации (accounts)

Реализована кастомная модель пользователя с email в качестве идентификатора вместо username. Это соответствует современным стандартам веб-разработки.

**Основные функции:**
- Регистрация с валидацией email
- Авторизация через email и пароль
- Профиль пользователя с возможностью редактирования
- История заказов

### 6.2 Модуль каталога (shop)

Реализован полноценный каталог товаров с иерархической структурой категорий.

**Основные функции:**
- Отображение списка товаров с пагинацией
- Фильтрация по категориям
- Поиск по названию и описанию
- Детальная страница товара с изображениями
- SEO-оптимизированные URL (slug)

### 6.3 Модуль корзины (cart)

Корзина реализована с использованием сессий для незарегистрированных пользователей и привязывается к пользователю после авторизации.

**Основные функции:**
- Добавление товаров в корзину
- Изменение количества
- Удаление товаров
- Расчёт итоговой суммы
- Очистка корзины

### 6.4 Модуль заказов (orders)

Система заказов поддерживает полный жизненный цикл от создания до доставки.

**Основные функции:**
- Оформление заказа с валидацией данных
- Выбор способа оплаты
- Отслеживание статуса заказа
- История заказов пользователя
- Автоматический расчёт стоимости

### 6.5 Административная панель

Использован пакет **Django Jazzmin** для создания современной и удобной админ-панели.

**Возможности:**
- Управление всеми моделями данных
- Фильтрация и поиск записей
- Импорт/экспорт данных
- Кастомные действия (активация/деактивация пользователей)
- Статистика продаж
- Современный адаптивный интерфейс

### 6.6 Безопасность

Реализованы следующие меры безопасности:
- CSRF-защита для всех форм
- Хеширование паролей (PBKDF2)
- Валидация сложности пароля
- Защита от SQL-инъекций через ORM
- Настройка ALLOWED_HOSTS
- Валидация email

### 6.7 Контейнеризация

Приложение упаковано в Docker-контейнеры для упрощения развёртывания:

**Dockerfile:**
- Базовый образ: Python 3.10-slim
- Установка зависимостей из requirements.txt
- Сборка статики
- Запуск через Gunicorn

**docker-compose.yml:**
- Сервис базы данных PostgreSQL
- Веб-приложение с зависимостью от БД
- Настройка volumes для персистентности данных

---

## 7. РУКОВОДСТВО ПОЛЬЗОВАТЕЛЯ

### 7.1 Установка

#### Требования:
- Python 3.10+
- pip (менеджер пакетов Python)

#### Шаги установки:

1. **Клонирование репозитория:**
   ```bash
   git clone <repository-url>
   cd eshop
   ```

2. **Создание виртуального окружения:**
   ```bash
   python -m venv venv
   ```

3. **Активация виртуального окружения:**
   - Windows: `venv\Scripts\activate`
   - Linux/Mac: `source venv/bin/activate`

4. **Установка зависимостей:**
   ```bash
   pip install -r requirements.txt
   ```

5. **Выполнение миграций базы данных:**
   ```bash
   python manage.py migrate
   ```

6. **Создание суперпользователя:**
   ```bash
   python manage.py createsuperuser
   ```

7. **Запуск сервера разработки:**
   ```bash
   python manage.py runserver
   ```

8. **Открытие приложения:**
   Перейдите по адресу `http://127.0.0.1:8000/`

### 7.2 Использование с Docker

Для развёртывания с использованием Docker и PostgreSQL:

```bash
docker-compose up --build
```

Приложение будет доступно по адресу `http://localhost:8000/`

### 7.3 Генерация тестовых данных

Для наполнения базы данных тестовыми товарами:

```bash
python manage.py generate_test_data
```

Эта команда создаст категории, товары и изображения.

### 7.4 Работа с приложением

#### Покупка товаров:

1. **Просмотр каталога:** На главной странице представлены все товары
2. **Фильтрация:** Выберите категорию для фильтрации товаров
3. **Поиск:** Используйте строку поиска для нахождения товаров
4. **Добавление в корзину:** Нажмите кнопку «Добавить в корзину» на карточке товара
5. **Просмотр корзины:** Перейдите в раздел «Корзина» в верхнем меню
6. **Оформление заказа:** Нажмите «Оформить заказ» и заполните форму доставки

#### Личный кабинет:

1. **Регистрация:** Нажмите «Регистрация» и заполните форму
2. **Вход:** Используйте email и пароль для авторизации
3. **Профиль:** Редактируйте личные данные в разделе «Профиль»
4. **История заказов:** Просматривайте статус и детали заказов

#### Администрирование:

1. **Вход в админку:** Перейдите по адресу `http://127.0.0.1:8000/admin/`
2. **Управление товарами:** Раздел Shop → Products
3. **Управление заказами:** Раздел Orders → Orders
4. **Управление пользователями:** Раздел Accounts → Users

---

## 8. РУКОВОДСТВО ПРОГРАММИСТА

### 8.1 Структура проекта

```
eshop/
├── accounts/              # Приложение авторизации
│   ├── models.py         # Модель User
│   ├── views.py          # Views для авторизации
│   ├── forms.py          # Формы регистрации/входа
│   └── urls.py           # URL-маршруты
├── shop/                 # Приложение каталога
│   ├── models.py         # Модели Category, Product
│   ├── views.py          # Views для каталога
│   └── urls.py           # URL-маршруты
├── cart/                 # Приложение корзины
│   ├── models.py         # Модели Cart, CartItem
│   ├── cart.py           # Класс Cart для работы с сессией
│   ├── views.py          # Views для корзины
│   └── urls.py           # URL-маршруты
├── orders/               # Приложение заказов
│   ├── models.py         # Модели Order, OrderItem, Payment
│   ├── views.py          # Views для заказов
│   ├── forms.py          # Форма оформления заказа
│   └── urls.py           # URL-маршруты
├── eshop/                # Основной конфигурационный пакет
│   ├── settings.py       # Настройки проекта
│   ├── urls.py           # Корневой URLconf
│   └── wsgi.py           # WSGI-конфигурация
├── templates/            # Шаблоны HTML
│   ├── base.html         # Базовый шаблон
│   ├── shop/             # Шаблоны каталога
│   ├── cart/             # Шаблоны корзины
│   ├── orders/           # Шаблоны заказов
│   └── accounts/         # Шаблоны авторизации
├── static/               # Статические файлы (CSS, JS)
├── media/                # Загруженные медиафайлы
├── requirements.txt      # Зависимости Python
├── Dockerfile            # Конфигурация Docker
└── docker-compose.yml    # Конфигурация Docker Compose
```

### 8.2 Ключевые компоненты

#### 8.2.1 Cart (cart/cart.py)

Класс `Cart` обеспечивает работу с корзиной через сессии:

```python
class Cart:
    def __init__(self, request):
        self.session = request.session
        cart = self.session.get(CART_SESSION_ID)
        if not cart:
            cart = self.session[CART_SESSION_ID] = {}
        self.cart = cart
```

Основные методы:
- `add()` — добавление товара
- `remove()` — удаление товара
- `save()` — сохранение в сессию
- `clear()` — очистка корзины
- `get_total_price()` — расчёт итоговой суммы

#### 8.2.2 Context Processors

`cart/context_processors.py` делает корзину доступной во всех шаблонах:

```python
def cart(request):
    return {'cart': Cart(request)}
```

### 8.3 Добавление новых функций

#### Добавление нового поля в модель:

1. Измените модель в `models.py`
2. Создайте миграцию:
   ```bash
   python manage.py makemigrations
   ```
3. Примените миграцию:
   ```bash
   python manage.py migrate
   ```

#### Добавление нового view:

1. Создайте функцию или класс в `views.py`
2. Добавьте URL-маршрут в `urls.py`
3. Создайте шаблон в `templates/`

### 8.4 Тестирование

Запуск тестов:
```bash
python manage.py test
```

Запуск тестов для конкретного приложения:
```bash
python manage.py test shop
```

### 8.5 Сборка статики

Для продакшена:
```bash
python manage.py collectstatic --noinput
```

### 8.6 Настройка PostgreSQL

Для использования PostgreSQL вместо SQLite:

1. Установите PostgreSQL и создайте базу данных
2. Установите драйвер:
   ```bash
   pip install psycopg2-binary
   ```
3. Измените настройки в `settings.py`:
   ```python
   DATABASES = {
       'default': {
           'ENGINE': 'django.db.backends.postgresql',
           'NAME': 'eshop_db',
           'USER': 'postgres',
           'PASSWORD': 'ваш_пароль',
           'HOST': 'localhost',
           'PORT': '5432',
       }
   }
   ```
4. Выполните миграции

---

## 9. ЗАКЛЮЧЕНИЕ

В рамках данной работы было разработано полнофункциональное веб-приложение «Интернет-магазин» с использованием фреймворка Django.

### 9.1 Достигнутые результаты

1. **Реализованная функциональность:**
   - Каталог товаров с категориями и изображениями
   - Поиск и фильтрация товаров
   - Корзина покупок с возможностью управления товарами
   - Система оформления заказов
   - Авторизация и личный кабинет пользователя
   - История заказов
   - Административная панель с современным интерфейсом

2. **Технические достижения:**
   - Модульная архитектура приложения
   - Оптимизированная структура базы данных
   - Контейнеризация с использованием Docker
   - Защита от основных веб-уязвимостей
   - Адаптивный дизайн на базе Bootstrap 5

### 9.2 Перспективы развития

Возможные направления развития проекта:
- Интеграция платёжных систем (Stripe, ЮKassa)
- Реализация системы скидок и промокодов
- Добавление системы отзывов и рейтингов
- Интеграция с службами доставки
- Мобильное приложение (React Native / Flutter)
- API для интеграции с внешними системами
- Аналитика и отчёты
- Мультиязычность

### 9.3 Вывод

Разработанное приложение полностью соответствует поставленным требованиям и может использоваться как основа для создания коммерческого интернет-магазина. Использование современных технологий и лучших практик разработки обеспечивает надёжность, безопасность и масштабируемость системы.

---

## 10. СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ

1. **Django Documentation** — https://docs.djangoproject.com/
2. **Django by Example** — Antonio Melé. Packt Publishing, 2016
3. **Two Scoops of Django 3.x** — Daniel Roy Greenfeld, Audrey Roy Greenfeld. Feldroy, 2020
4. **Python Crash Course** — Eric Matthes. No Starch Press, 2019
5. **Bootstrap Documentation** — https://getbootstrap.com/docs/5.0/
6. **Django Jazzmin** — https://github.com/farridav/django-jazzmin
7. **Docker Documentation** — https://docs.docker.com/
8. **PostgreSQL Documentation** — https://www.postgresql.org/docs/
9. **MDN Web Docs** — https://developer.mozilla.org/
10. **Real Python** — https://realpython.com/

---

**Приложения:**

1. Приложение А. Скриншоты интерфейса приложения
2. Приложение Б. Схема базы данных
3. Приложение В. Примеры кода ключевых компонентов

---

**Дата выполнения:** [дата]

**Разработчик:** [ФИО]

**Руководитель:** [ФИО]
